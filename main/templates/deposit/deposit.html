{% extends "base.html" %}

{% block title %}Deposit Funds | GRAND ELITE CREDIT UNION{% endblock %}
{% block header %}Deposit Funds{% endblock %}

{% block content %}
<div class="space-y-6">
    <!-- Quick Stats -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
        <div class="bg-white rounded-xl shadow-sm p-5 border-l-4 border-gecu-blue">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-500">Last Deposit</p>
                    <p class="text-2xl font-bold text-gray-900 mt-1">$500.00</p>
                </div>
                <div class="w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center">
                    <i class="fas fa-arrow-down text-gecu-blue text-xl"></i>
                </div>
            </div>
        </div>
        
        <div class="bg-white rounded-xl shadow-sm p-5 border-l-4 border-green-500">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-500">Processing Time</p>
                    <p class="text-2xl font-bold text-gray-900 mt-1">1-3 Days</p>
                </div>
                <div class="w-12 h-12 bg-green-50 rounded-full flex items-center justify-center">
                    <i class="fas fa-clock text-green-500 text-xl"></i>
                </div>
            </div>
        </div>
        
        <div class="bg-white rounded-xl shadow-sm p-5 border-l-4 border-purple-500">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-500">Available Methods</p>
                    <p class="text-2xl font-bold text-gray-900 mt-1">4</p>
                </div>
                <div class="w-12 h-12 bg-purple-50 rounded-full flex items-center justify-center">
                    <i class="fas fa-wallet text-purple-500 text-xl"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Deposit Methods Tabs -->
    <div class="bg-white shadow-lg rounded-2xl overflow-hidden" x-data="{ activeTab: 'bank' }">
        <div class="border-b border-gray-200">
            <nav class="-mb-px flex overflow-x-auto hide-scrollbar">
                <button
                    @click="activeTab = 'bank'"
                    :class="{ 'border-gecu-blue text-gecu-navy bg-blue-50': activeTab === 'bank', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': activeTab !== 'bank' }"
                    class="whitespace-nowrap py-4 px-6 border-b-2 font-medium text-sm flex items-center transition-colors"
                >
                    <div class="w-8 h-8 bg-gradient-to-r from-gecu-blue to-gecu-navy rounded-lg flex items-center justify-center mr-3">
                        <i class="fas fa-university text-white text-sm"></i>
                    </div>
                    Bank Transfer
                </button>
                <button
                    @click="activeTab = 'gift'"
                    :class="{ 'border-gecu-blue text-gecu-navy bg-blue-50': activeTab === 'gift', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': activeTab !== 'gift' }"
                    class="whitespace-nowrap py-4 px-6 border-b-2 font-medium text-sm flex items-center transition-colors"
                >
                    <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-lg flex items-center justify-center mr-3">
                        <i class="fas fa-gift text-white text-sm"></i>
                    </div>
                    Gift Cards
                </button>
                <button
                    @click="activeTab = 'cashapp'"
                    :class="{ 'border-gecu-blue text-gecu-navy bg-blue-50': activeTab === 'cashapp', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': activeTab !== 'cashapp' }"
                    class="whitespace-nowrap py-4 px-6 border-b-2 font-medium text-sm flex items-center transition-colors"
                >
                    <div class="w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg flex items-center justify-center mr-3">
                        <i class="fas fa-money-bill-wave text-white text-sm"></i>
                    </div>
                    Cash App
                </button>
                <button
                    @click="activeTab = 'crypto'"
                    :class="{ 'border-gecu-blue text-gecu-navy bg-blue-50': activeTab === 'crypto', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': activeTab !== 'crypto' }"
                    class="whitespace-nowrap py-4 px-6 border-b-2 font-medium text-sm flex items-center transition-colors"
                >
                    <div class="w-8 h-8 bg-gradient-to-r from-orange-500 to-amber-600 rounded-lg flex items-center justify-center mr-3">
                        <i class="fab fa-bitcoin text-white text-sm"></i>
                    </div>
                    Crypto
                </button>
            </nav>
        </div>

        <!-- Bank Transfer Tab -->
        <div x-show="activeTab === 'bank'" x-transition class="p-6">
            <div class="max-w-2xl mx-auto">
                <div class="text-center mb-8">
                    <h3 class="text-2xl font-bold text-gray-900 mb-2">Bank Transfer</h3>
                    <p class="text-gray-600">Securely transfer funds from your bank account</p>
                </div>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Instructions Card -->
                    <div class="space-y-6">
                        <div class="bg-gradient-to-br from-gecu-navy to-gecu-blue text-white rounded-2xl p-6">
                            <h4 class="font-semibold text-lg mb-4 flex items-center">
                                <i class="fas fa-info-circle mr-2"></i>
                                Transfer Instructions
                            </h4>
                            
                            {% if deposit_accounts.bank %}
                            <div class="space-y-4">
                                <div class="flex items-start">
                                    <div class="flex-shrink-0 bg-white bg-opacity-20 p-2 rounded-lg mr-3">
                                        <i class="fas fa-university"></i>
                                    </div>
                                    <div>
                                        <p class="text-sm opacity-90">Bank Name</p>
                                        <p class="font-semibold">{{ deposit_accounts.bank.bank_name }}</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start">
                                    <div class="flex-shrink-0 bg-white bg-opacity-20 p-2 rounded-lg mr-3">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <div>
                                        <p class="text-sm opacity-90">Account Name</p>
                                        <p class="font-semibold">{{ deposit_accounts.bank.account_name }}</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start">
                                    <div class="flex-shrink-0 bg-white bg-opacity-20 p-2 rounded-lg mr-3">
                                        <i class="fas fa-credit-card"></i>
                                    </div>
                                    <div>
                                        <p class="text-sm opacity-90">Account Number</p>
                                        <p class="font-semibold font-mono">{{ deposit_accounts.bank.account_number }}</p>
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                        
                        <div class="bg-blue-50 border border-blue-200 rounded-xl p-5">
                            <h5 class="font-semibold text-blue-800 mb-3 flex items-center">
                                <i class="fas fa-exclamation-circle mr-2"></i>
                                Important Notes
                            </h5>
                            <ul class="text-sm text-blue-700 space-y-2">
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-blue-500 mt-1 mr-2 flex-shrink-0"></i>
                                    <span>Transfer must be from an account in your name</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-blue-500 mt-1 mr-2 flex-shrink-0"></i>
                                    <span>Use your account number as reference</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-blue-500 mt-1 mr-2 flex-shrink-0"></i>
                                    <span>Processing: 1-3 business days</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Form Card -->
                    <div class="bg-gray-50 rounded-2xl p-6">
                        <h4 class="font-semibold text-gray-900 mb-6 text-lg">Submit Transfer Details</h4>
                        
                        {% if deposit_accounts.bank %}
                        <form method="post" enctype="multipart/form-data" class="space-y-5">
                            {% csrf_token %}
                            <input type="hidden" name="tab" value="bank">
                            
                            <!-- Amount Field -->
                            <div>
                                <label for="{{ bank_form.amount.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                                    Amount Transferred
                                </label>
                                <div class="relative rounded-lg shadow-sm">
                                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                        <span class="text-gray-500">$</span>
                                    </div>
                                    <input type="number" 
                                           id="{{ bank_form.amount.id_for_label }}" 
                                           name="{{ bank_form.amount.html_name }}"
                                           class="block w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-gecu-blue focus:border-gecu-blue sm:text-sm"
                                           placeholder="0.00"
                                           value="{{ bank_form.amount.value|default_if_none:'' }}">
                                </div>
                                {% if bank_form.amount.errors %}
                                    <p class="mt-2 text-sm text-red-600">{{ bank_form.amount.errors.as_text }}</p>
                                {% endif %}
                            </div>
                            
                            <!-- Proof Image Field -->
                            <div>
                                <label for="{{ bank_form.proof_image.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                                    Transfer Receipt
                                </label>
                                <div class="mt-1 border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gecu-blue transition-colors">
                                    <i class="fas fa-cloud-upload-alt text-gray-400 text-xl mb-2"></i>
                                    <p class="text-sm text-gray-600">
                                        <span class="font-medium text-gecu-blue">Upload a file</span> or drag and drop
                                    </p>
                                    <p class="text-xs text-gray-500 mt-1">PNG, JPG, PDF up to 10MB</p>
                                    <input type="file" 
                                           id="{{ bank_form.proof_image.id_for_label }}" 
                                           name="{{ bank_form.proof_image.html_name }}"
                                           class="hidden">
                                </div>
                            </div>
                            
                            <!-- Note Field -->
                            <div>
                                <label for="{{ bank_form.note.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                                    Reference Notes
                                </label>
                                <textarea id="{{ bank_form.note.id_for_label }}" 
                                          name="{{ bank_form.note.html_name }}"
                                          rows="3"
                                          class="block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-gecu-blue focus:border-gecu-blue sm:text-sm p-3"
                                          placeholder="Any additional transfer references...">{{ bank_form.note.value|default_if_none:'' }}</textarea>
                            </div>
                            
                            <!-- Submit Button -->
                            <div class="pt-4">
                                <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-base font-semibold text-white bg-gradient-to-r from-gecu-navy to-gecu-blue hover:from-gecu-blue hover:to-gecu-navy focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gecu-blue transition-all">
                                    <i class="fas fa-paper-plane mr-2"></i> Submit Transfer
                                </button>
                            </div>
                        </form>
                        {% else %}
                        <div class="text-center py-8">
                            <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-exclamation-triangle text-red-500 text-2xl"></i>
                            </div>
                            <h4 class="text-lg font-semibold text-gray-900 mb-2">Service Unavailable</h4>
                            <p class="text-gray-600">Bank transfers are temporarily unavailable. Please try another deposit method.</p>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <!-- Cash App Tab -->
        <div x-show="activeTab === 'cashapp'" x-transition class="p-6">
            <div class="max-w-2xl mx-auto">
                <div class="text-center mb-8">
                    <h3 class="text-2xl font-bold text-gray-900 mb-2">Cash App Deposit</h3>
                    <p class="text-gray-600">Instant deposits via Cash App</p>
                </div>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Instructions Card -->
                    <div class="space-y-6">
                        <div class="bg-gradient-to-br from-green-500 to-emerald-600 text-white rounded-2xl p-6">
                            <h4 class="font-semibold text-lg mb-4 flex items-center">
                                <i class="fas fa-mobile-alt mr-2"></i>
                                Send Payment To
                            </h4>
                            
                            {% if deposit_accounts.cashapp %}
                            <div class="text-center py-4">
                                <div class="bg-white bg-opacity-20 rounded-xl p-4 mb-4">
                                    <p class="text-sm opacity-90 mb-2">Cash App Tag</p>
                                    <p class="text-2xl font-bold font-mono">{{ deposit_accounts.cashapp.cashapp_tag }}</p>
                                </div>
                                <p class="text-sm opacity-90">Send your payment to this tag and submit proof below</p>
                            </div>
                            {% endif %}
                        </div>
                        
                        <div class="bg-green-50 border border-green-200 rounded-xl p-5">
                            <h5 class="font-semibold text-green-800 mb-3 flex items-center">
                                <i class="fas fa-bolt mr-2"></i>
                                Quick Processing
                            </h5>
                            <ul class="text-sm text-green-700 space-y-2">
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-green-500 mt-1 mr-2 flex-shrink-0"></i>
                                    <span>1.5% processing fee applies</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-green-500 mt-1 mr-2 flex-shrink-0"></i>
                                    <span>Typically processed within 2-4 hours</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-green-500 mt-1 mr-2 flex-shrink-0"></i>
                                    <span>Upload payment proof for faster processing</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Form Card -->
                    <div class="bg-gray-50 rounded-2xl p-6">
                        <h4 class="font-semibold text-gray-900 mb-6 text-lg">Submit Deposit Details</h4>
                        
                        {% if deposit_accounts.cashapp %}
                        <form method="post" enctype="multipart/form-data" class="space-y-5">
                            {% csrf_token %}
                            {{ cashapp_form.non_field_errors }}
                            <input type="hidden" name="tab" value="cashapp">

                            <!-- Amount Field -->
                            <div>
                                <label for="{{ cashapp_form.amount.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                                    Amount Sent
                                </label>
                                <div class="relative rounded-lg shadow-sm">
                                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                        <span class="text-gray-500">$</span>
                                    </div>
                                    <input type="number" 
                                           id="{{ cashapp_form.amount.id_for_label }}" 
                                           name="{{ cashapp_form.amount.html_name }}"
                                           class="block w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-gecu-blue focus:border-gecu-blue sm:text-sm"
                                           placeholder="0.00"
                                           value="{{ cashapp_form.amount.value|default_if_none:'' }}">
                                </div>
                                {% if cashapp_form.amount.errors %}
                                    <p class="mt-2 text-sm text-red-600">{{ cashapp_form.amount.errors.as_text }}</p>
                                {% endif %}
                            </div>

                            <!-- Sender Info -->
                            <div>
                                <label for="{{ cashapp_form.sender_info.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                                    Your Cash App Info
                                </label>
                                <input type="text" 
                                       id="{{ cashapp_form.sender_info.id_for_label }}" 
                                       name="{{ cashapp_form.sender_info.html_name }}"
                                       class="block w-full py-3 px-4 border border-gray-300 rounded-lg focus:ring-gecu-blue focus:border-gecu-blue sm:text-sm"
                                       placeholder="Your Cash App tag or name"
                                       value="{{ cashapp_form.sender_info.value|default_if_none:'' }}">
                                {% if cashapp_form.sender_info.errors %}
                                    <p class="mt-2 text-sm text-red-600">{{ cashapp_form.sender_info.errors.as_text }}</p>
                                {% endif %}
                            </div>

                            <!-- Proof Image -->
                            <div>
                                <label for="{{ cashapp_form.proof_image.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                                    Payment Proof
                                </label>
                                <div class="mt-1 border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gecu-blue transition-colors">
                                    <i class="fas fa-cloud-upload-alt text-gray-400 text-xl mb-2"></i>
                                    <p class="text-sm text-gray-600">
                                        <span class="font-medium text-gecu-blue">Upload screenshot</span> of payment confirmation
                                    </p>
                                    <p class="text-xs text-gray-500 mt-1">PNG, JPG up to 5MB</p>
                                    <input type="file" 
                                           id="{{ cashapp_form.proof_image.id_for_label }}" 
                                           name="{{ cashapp_form.proof_image.html_name }}"
                                           class="hidden">
                                </div>
                                {% if cashapp_form.proof_image.errors %}
                                    <p class="mt-2 text-sm text-red-600">{{ cashapp_form.proof_image.errors.as_text }}</p>
                                {% endif %}
                            </div>

                            <!-- Submit Button -->
                            <div class="pt-4">
                                <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-base font-semibold text-white bg-gradient-to-r from-gecu-navy to-gecu-blue hover:from-gecu-blue hover:to-gecu-navy focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gecu-blue transition-all">
                                    <i class="fas fa-paper-plane mr-2"></i> Submit Deposit
                                </button>
                            </div>
                        </form>
                        {% else %}
                        <div class="text-center py-8">
                            <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-exclamation-triangle text-red-500 text-2xl"></i>
                            </div>
                            <h4 class="text-lg font-semibold text-gray-900 mb-2">Service Unavailable</h4>
                            <p class="text-gray-600">Cash App deposits are temporarily unavailable.</p>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <!-- Crypto Tab -->
        <div x-show="activeTab === 'crypto'" x-transition class="p-6">
            <div class="max-w-4xl mx-auto">
                <div class="text-center mb-8">
                    <h3 class="text-2xl font-bold text-gray-900 mb-2">Crypto Deposit</h3>
                    <p class="text-gray-600">Secure cryptocurrency deposits</p>
                </div>
                
                {% if deposit_accounts.crypto %}
                <div class="grid lg:grid-cols-3 gap-8">
                    <!-- Wallet Info Card -->
                    <div class="lg:col-span-2 space-y-6">
                        <div class="bg-gradient-to-br from-orange-500 to-amber-600 text-white rounded-2xl p-6">
                            <h4 class="font-semibold text-lg mb-4 flex items-center">
                                <i class="fab fa-bitcoin mr-2"></i>
                                Your Deposit Wallet
                            </h4>
                            
                            <div x-data="{ copied: false }" class="space-y-4">
                                <div class="bg-white bg-opacity-20 rounded-xl p-4">
                                    <p class="text-sm opacity-90 mb-2">Wallet Address</p>
                                    <div class="flex items-center justify-between">
                                        <code class="text-sm font-mono truncate">{{ deposit_accounts.crypto.crypto_address }}</code>
                                        <button
                                            type="button"
                                            @click="
                                                navigator.clipboard.writeText('{{ deposit_accounts.crypto.crypto_address }}');
                                                copied = true;
                                                setTimeout(() => copied = false, 2000);
                                            "
                                            class="ml-2 text-white hover:text-orange-200 transition-colors"
                                            title="Copy address"
                                        >
                                            <i class="far fa-copy text-lg"></i>
                                        </button>
                                    </div>
                                    <div x-show="copied" x-transition class="text-center mt-2">
                                        <span class="text-xs bg-white text-orange-600 px-2 py-1 rounded">Copied to clipboard!</span>
                                    </div>
                                </div>
                                
                                <div class="text-center">
                                    <div class="bg-white p-3 rounded-lg inline-block">
                                        <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data={{ deposit_accounts.crypto.crypto_address }}" 
                                             alt="QR Code" 
                                             class="h-32 w-32">
                                    </div>
                                    <p class="text-xs opacity-90 mt-2">
                                        Scan QR code or copy address above
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-orange-50 border border-orange-200 rounded-xl p-5">
                            <h5 class="font-semibold text-orange-800 mb-3 flex items-center">
                                <i class="fas fa-shield-alt mr-2"></i>
                                Security Notes
                            </h5>
                            <ul class="text-sm text-orange-700 space-y-2">
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-orange-500 mt-1 mr-2 flex-shrink-0"></i>
                                    <span>1% conversion fee applies</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-orange-500 mt-1 mr-2 flex-shrink-0"></i>
                                    <span>Minimum deposit: $10 USD equivalent</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-orange-500 mt-1 mr-2 flex-shrink-0"></i>
                                    <span>Processing: 10-30 minutes after confirmation</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-orange-500 mt-1 mr-2 flex-shrink-0"></i>
                                    <span>Double-check wallet address before sending</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Form Card -->
                    <div class="bg-gray-50 rounded-2xl p-6">
                        <h4 class="font-semibold text-gray-900 mb-6 text-lg">Submit Deposit</h4>
                        
                        <form method="POST" enctype="multipart/form-data" class="space-y-5">
                            {% csrf_token %}
                            <input type="hidden" name="tab" value="crypto">
                            
                            <!-- Amount Field -->
                            <div>
                                <label for="{{ crypto_form.amount.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                                    Amount (USD)
                                </label>
                                <div class="relative rounded-lg shadow-sm">
                                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                        <span class="text-gray-500">$</span>
                                    </div>
                                    <input type="number" 
                                           name="amount"
                                           id="{{ crypto_form.amount.id_for_label }}"
                                           class="block w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-gecu-blue focus:border-gecu-blue sm:text-sm"
                                           placeholder="0.00"
                                           step="0.01"
                                           min="10"
                                           required>
                                </div>
                                {% if crypto_form.amount.errors %}
                                    <p class="mt-2 text-sm text-red-600">{{ crypto_form.amount.errors.0 }}</p>
                                {% endif %}
                            </div>

                            <!-- Currency Select -->
                            <div>
                                <label for="{{ crypto_form.crypto_type.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                                    Cryptocurrency
                                </label>
                                <select name="crypto_type"
                                        id="{{ crypto_form.crypto_type.id_for_label }}"
                                        class="block w-full py-3 px-4 border border-gray-300 rounded-lg focus:ring-gecu-blue focus:border-gecu-blue sm:text-sm">
                                    {% for value, label in crypto_form.crypto_type.field.choices %}
                                        <option value="{{ value }}">{{ label }}</option>
                                    {% endfor %}
                                </select>
                                {% if crypto_form.crypto_type.errors %}
                                    <p class="mt-2 text-sm text-red-600">{{ crypto_form.crypto_type.errors.0 }}</p>
                                {% endif %}
                            </div>

                            <!-- Proof Upload -->
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    Transaction Proof
                                </label>
                                <div class="mt-1 border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gecu-blue transition-colors">
                                    <i class="fas fa-cloud-upload-alt text-gray-400 text-xl mb-2"></i>
                                    <p class="text-sm text-gray-600">
                                        <span class="font-medium text-gecu-blue">Upload proof</span> or transaction hash
                                    </p>
                                    <p class="text-xs text-gray-500 mt-1">Screenshot, PDF, or text file</p>
                                    <input type="file" 
                                           name="proof_image"
                                           class="hidden">
                                </div>
                                {% if crypto_form.proof_image.errors %}
                                    <p class="mt-2 text-sm text-red-600">{{ crypto_form.proof_image.errors.0 }}</p>
                                {% endif %}
                            </div>

                            <!-- Notes -->
                            <div>
                                <label for="{{ crypto_form.note.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                                    Additional Notes
                                </label>
                                <textarea name="note"
                                          id="{{ crypto_form.note.id_for_label }}"
                                          rows="3"
                                          class="block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-gecu-blue focus:border-gecu-blue sm:text-sm p-3"
                                          placeholder="Transaction hash or additional information...">{{ crypto_form.note.value|default_if_none:'' }}</textarea>
                            </div>

                            <!-- Submit Button -->
                            <div class="pt-4">
                                <button type="submit" 
                                        class="w-full flex justify-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-base font-semibold text-white bg-gradient-to-r from-gecu-navy to-gecu-blue hover:from-gecu-blue hover:to-gecu-navy focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gecu-blue transition-all">
                                    <i class="fas fa-paper-plane mr-2"></i>
                                    Submit Deposit
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                {% else %}
                <div class="text-center py-12">
                    <div class="w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-exclamation-triangle text-yellow-500 text-3xl"></i>
                    </div>
                    <h4 class="text-xl font-semibold text-gray-900 mb-3">Temporarily Unavailable</h4>
                    <p class="text-gray-600 max-w-md mx-auto">Crypto deposits are currently undergoing maintenance. Please use another deposit method or check back later.</p>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Gift Cards Tab -->
        <div x-show="activeTab === 'gift'" x-transition class="p-6">
            <div class="max-w-4xl mx-auto">
                <div class="text-center mb-8">
                    <h3 class="text-2xl font-bold text-gray-900 mb-2">Gift Card Redemption</h3>
                    <p class="text-gray-600">Convert gift cards to account balance</p>
                </div>
                
                <div class="grid lg:grid-cols-3 gap-8">
                    <!-- Card Selection -->
                    <div class="lg:col-span-2">
                        <div class="bg-gradient-to-br from-purple-500 to-indigo-600 text-white rounded-2xl p-6">
                            <h4 class="font-semibold text-lg mb-6 flex items-center">
                                <i class="fas fa-gift mr-2"></i>
                                Select Card Type
                            </h4>
                            
                            <div class="grid grid-cols-2 md:grid-cols-3 gap-4" x-data="{ selectedCard: 'amazon' }">
                                <template x-for="card in [
                                    {id: 'amazon', name: 'Amazon', color: 'bg-yellow-500', logo: 'fab fa-amazon'},
                                    {id: 'walmart', name: 'Walmart', color: 'bg-blue-500', logo: 'fas fa-shopping-bag'},
                                    {id: 'target', name: 'Target', color: 'bg-red-500', logo: 'fas fa-bullseye'},
                                    {id: 'apple', name: 'Apple', color: 'bg-gray-800', logo: 'fab fa-apple'},
                                    {id: 'visa', name: 'Visa', color: 'bg-blue-600', logo: 'fab fa-cc-visa'},
                                    {id: 'steam', name: 'Steam', color: 'bg-gray-700', logo: 'fab fa-steam'}
                                ]" :key="card.id">
                                    <button type="button"
                                            @click="selectedCard = card.id"
                                            :class="selectedCard === card.id ? 'ring-2 ring-white ring-opacity-50 transform scale-105' : 'opacity-90'"
                                            class="p-4 bg-white bg-opacity-10 rounded-xl hover:bg-opacity-20 transition-all flex flex-col items-center"
                                            style="backdrop-filter: blur(10px);">
                                        <i :class="card.logo" class="text-2xl mb-2"></i>
                                        <span class="text-sm font-medium" x-text="card.name"></span>
                                    </button>
                                </template>
                            </div>
                        </div>
                        
                        <div class="bg-purple-50 border border-purple-200 rounded-xl p-5 mt-6">
                            <h5 class="font-semibold text-purple-800 mb-3 flex items-center">
                                <i class="fas fa-info-circle mr-2"></i>
                                Redemption Info
                            </h5>
                            <ul class="text-sm text-purple-700 space-y-2">
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-purple-500 mt-1 mr-2 flex-shrink-0"></i>
                                    <span>5% redemption fee applies</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-purple-500 mt-1 mr-2 flex-shrink-0"></i>
                                    <span>Processing may take up to 24 hours</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-purple-500 mt-1 mr-2 flex-shrink-0"></i>
                                    <span>Only unused gift cards accepted</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-purple-500 mt-1 mr-2 flex-shrink-0"></i>
                                    <span>Funds available after verification</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Form Card -->
                    <div class="bg-gray-50 rounded-2xl p-6">
                        <h4 class="font-semibold text-gray-900 mb-6 text-lg">Card Details</h4>
                        
                        <form method="POST" enctype="multipart/form-data" class="space-y-5">
                            {% csrf_token %}
                            <input type="hidden" name="tab" value="gift">
                            
                            <!-- Card Number -->
                            <div>
                                <label for="{{ gift_form.card_number.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                                    Card Number
                                </label>
                                <input type="text" 
                                       name="card_number"
                                       id="{{ gift_form.card_number.id_for_label }}"
                                       class="block w-full py-3 px-4 border border-gray-300 rounded-lg focus:ring-gecu-blue focus:border-gecu-blue sm:text-sm"
                                       placeholder="Enter gift card number"
                                       required>
                                {% if gift_form.card_number.errors %}
                                    <p class="mt-2 text-sm text-red-600">{{ gift_form.card_number.errors.0 }}</p>
                                {% endif %}
                            </div>
                            
                            <!-- PIN -->
                            <div>
                                <label for="{{ gift_form.pin.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                                    PIN (Optional)
                                </label>
                                <input type="text" 
                                       name="pin"
                                       id="{{ gift_form.pin.id_for_label }}"
                                       class="block w-full py-3 px-4 border border-gray-300 rounded-lg focus:ring-gecu-blue focus:border-gecu-blue sm:text-sm"
                                       placeholder="Enter PIN if required">
                                {% if gift_form.pin.errors %}
                                    <p class="mt-2 text-sm text-red-600">{{ gift_form.pin.errors.0 }}</p>
                                {% endif %}
                            </div>
                            
                            <!-- Amount -->
                            <div>
                                <label for="{{ gift_form.amount.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                                    Card Value
                                </label>
                                <div class="relative rounded-lg shadow-sm">
                                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                        <span class="text-gray-500">$</span>
                                    </div>
                                    <input type="number" 
                                           name="amount"
                                           id="{{ gift_form.amount.id_for_label }}"
                                           class="block w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-gecu-blue focus:border-gecu-blue sm:text-sm"
                                           placeholder="0.00"
                                           step="0.01">
                                </div>
                                {% if gift_form.amount.errors %}
                                    <p class="mt-2 text-sm text-red-600">{{ gift_form.amount.errors.0 }}</p>
                                {% endif %}
                            </div>
                            
                            <!-- Proof Image -->
                            <div>
                                <label for="{{ gift_form.proof_image.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                                    Card Photo
                                </label>
                                <div class="mt-1 border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gecu-blue transition-colors">
                                    <i class="fas fa-cloud-upload-alt text-gray-400 text-xl mb-2"></i>
                                    <p class="text-sm text-gray-600">
                                        <span class="font-medium text-gecu-blue">Upload photo</span> showing card details
                                    </p>
                                    <p class="text-xs text-gray-500 mt-1">Clear image of card number and balance</p>
                                    <input type="file" 
                                           name="proof_image"
                                           id="{{ gift_form.proof_image.id_for_label }}"
                                           class="hidden"
                                           accept="image/*">
                                </div>
                                {% if gift_form.proof_image.errors %}
                                    <p class="mt-2 text-sm text-red-600">{{ gift_form.proof_image.errors.0 }}</p>
                                {% endif %}
                            </div>
                            
                            <!-- Notes -->
                            <div>
                                <label for="{{ gift_form.note.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                                    Notes
                                </label>
                                <textarea name="note"
                                          id="{{ gift_form.note.id_for_label }}"
                                          rows="2"
                                          class="block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-gecu-blue focus:border-gecu-blue sm:text-sm p-3"
                                          placeholder="Any additional information..."></textarea>
                            </div>
                            
                            <!-- Submit Button -->
                            <div class="pt-4">
                                <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-base font-semibold text-white bg-gradient-to-r from-gecu-navy to-gecu-blue hover:from-gecu-blue hover:to-gecu-navy focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gecu-blue transition-all">
                                    Redeem Gift Card
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Success Modal -->
<div x-data="{ showSuccess: false }" 
     x-show="showSuccess" 
     x-transition
     class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4"
     style="display: none;">
    <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 mx-4">
        <div class="text-center">
            <div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4">
                <i class="fas fa-check text-green-600 text-2xl"></i>
            </div>
            <h3 class="text-xl font-semibold text-gray-900 mb-2">Deposit Submitted!</h3>
            <p class="text-gray-600 mb-6">Your deposit request has been received and is being processed.</p>
            <button @click="showSuccess = false" 
                    class="w-full bg-gradient-to-r from-gecu-navy to-gecu-blue text-white py-3 rounded-xl font-semibold hover:from-gecu-blue hover:to-gecu-navy transition-all">
                Continue
            </button>
        </div>
    </div>
</div>

<script>
    // File upload interaction
    document.addEventListener('DOMContentLoaded', function() {
        const fileInputs = document.querySelectorAll('input[type="file"]');
        
        fileInputs.forEach(input => {
            const container = input.closest('div');
            
            container.addEventListener('click', function(e) {
                if (e.target !== input) {
                    input.click();
                }
            });
            
            input.addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    const fileName = this.files[0].name;
                    const textElement = container.querySelector('p:first-of-type');
                    if (textElement) {
                        textElement.innerHTML = `<span class="font-medium text-gecu-blue">${fileName}</span>`;
                    }
                }
            });
            
            // Drag and drop
            container.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('border-gecu-blue', 'bg-blue-50');
            });
            
            container.addEventListener('dragleave', function(e) {
                e.preventDefault();
                this.classList.remove('border-gecu-blue', 'bg-blue-50');
            });
            
            container.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('border-gecu-blue', 'bg-blue-50');
                
                if (e.dataTransfer.files && e.dataTransfer.files[0]) {
                    input.files = e.dataTransfer.files;
                    const fileName = e.dataTransfer.files[0].name;
                    const textElement = container.querySelector('p:first-of-type');
                    if (textElement) {
                        textElement.innerHTML = `<span class="font-medium text-gecu-blue">${fileName}</span>`;
                    }
                }
            });
        });
    });
</script>
{% endblock %}